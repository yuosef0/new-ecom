# ุฏููู ุฅุนุฏุงุฏ Paymob Test API

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุฅุนุฏุงุฏ ูุงุณุชุฎุฏุงู Paymob Test API ูู ุงููุดุฑูุน.

## ๐ ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ](#ุงูุญุตูู-ุนูู-ุจูุงูุงุช-ุงูุงุฎุชุจุงุฑ)
3. [ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ](#ุฅุนุฏุงุฏ-ุงููุชุบูุฑุงุช-ุงูุจูุฆูุฉ)
4. [ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ](#ุจุทุงูุงุช-ุงูุงุฎุชุจุงุฑ)
5. [ุงุฎุชุจุงุฑ ุงูุชูุงูู](#ุงุฎุชุจุงุฑ-ุงูุชูุงูู)
6. [ุงูุงูุชูุงู ููุฅูุชุงุฌ](#ุงูุงูุชูุงู-ููุฅูุชุงุฌ)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูุงูู Paymob ูู ุงููุดุฑูุน ููุนุงูุฌุฉ ุงููุฏููุนุงุช ุงูุฅููุชุฑูููุฉ. ูุฏุนู ุงููุธุงู:

- **ุจุทุงูุงุช ุงูุงุฆุชูุงู/ุงูุฎุตู** (Visa, Mastercard)
- **ุงููุญุงูุธ ุงูุฅููุชุฑูููุฉ** (Vodafone Cash, Etisalat Cash, etc.)
- **ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู** (Cash on Delivery)

---

## ๐ ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุญุณุงุจ Paymob

1. ุงุฐูุจ ุฅูู [Paymob Portal](https://accept.paymob.com/portal2/en/register)
2. ูู ุจุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ุฃู ุชุณุฌูู ุงูุฏุฎูู
3. ุฃููู ุนูููุฉ ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุงูุฎุทูุฉ 2: ุงูุญุตูู ุนูู API Key

1. ุจุนุฏ ุชุณุฌูู ุงูุฏุฎููุ ุงุฐูุจ ุฅูู **Settings** โ **Account Info**
2. ุงูุณุฎ **API Key** ูู ูุณู **Test API Key**

### ุงูุฎุทูุฉ 3: ุงูุญุตูู ุนูู Integration ID

1. ุงุฐูุจ ุฅูู **Developers** โ **Payment Integrations**
2. ุงุฎุชุฑ **Online Card** integration
3. ุงูุณุฎ **Integration ID** ูู ุงูุชูุงุตูู

### ุงูุฎุทูุฉ 4: ุงูุญุตูู ุนูู iFrame ID

1. ุงุฐูุจ ุฅูู **Developers** โ **iFrames**
2. ูู ุจุฅูุดุงุก iFrame ุฌุฏูุฏ ุฃู ุงุณุชุฎุฏู ููุฌูุฏ
3. ุงูุณุฎ **iFrame ID**

### ุงูุฎุทูุฉ 5: ุงูุญุตูู ุนูู HMAC Secret

1. ุงุฐูุจ ุฅูู **Developers** โ **HMAC**
2. ุงูุณุฎ **HMAC Secret** ููุชุญูู ูู Webhooks

---

## โ๏ธ ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

### ููู `.env.local`

ุชู ุจุงููุนู ุฅุถุงูุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุงูุชุฑุงุถูุฉ ูู ููู `.env.local`:

```bash
# Paymob Test API
PAYMOB_API_KEY=ZXlKaGJHY2lPaUpJVXpVeE1pSXNJblI1Y0NJNklrcFhWQ0o5...
PAYMOB_INTEGRATION_ID=4549597
PAYMOB_IFRAME_ID=858127
PAYMOB_HMAC_SECRET=4C8C5CE1F5F32D1E0A8C0F4B8E8A9D3F
```

> **โ๏ธ ููุงุญุธุฉ ูุงูุฉ:** ุงูุจูุงูุงุช ุฃุนูุงู ูู ุจูุงูุงุช ุงุฎุชุจุงุฑ ุนุงูุฉ. ููุญุตูู ุนูู ุฃูุถู ุชุฌุฑุจุฉุ ุงุณุชุจุฏููุง ุจุจูุงูุงุช ุญุณุงุจู ุงูุฎุงุต.

### ุงุณุชุจุฏุงู ุงูุจูุงูุงุช

1. ุงูุชุญ ููู `.env.local`
2. ุงุณุชุจุฏู ุงูููู ุจุจูุงูุงุชู ูู Paymob Portal
3. ุงุญูุธ ุงูููู
4. ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ: `npm run dev`

---

## ๐ณ ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ

ุงุณุชุฎุฏู ุงูุจุทุงูุงุช ุงูุชุงููุฉ ูุงุฎุชุจุงุฑ ุงููุฏููุนุงุช ูู ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ:

### ุจุทุงูุงุช ูุงุฌุญุฉ (Successful)

| ุฑูู ุงูุจุทุงูุฉ | CVV | ุชุงุฑูุฎ ุงูุงูุชูุงุก | ุงููุชูุฌุฉ |
|-------------|-----|----------------|---------|
| `4987654321098769` | `123` | ุฃู ุชุงุฑูุฎ ูุณุชูุจูู | โ ูุฌุงุญ |
| `5123456789012346` | `123` | ุฃู ุชุงุฑูุฎ ูุณุชูุจูู | โ ูุฌุงุญ |

### ุจุทุงูุงุช ูุงุดูุฉ (Failed)

| ุฑูู ุงูุจุทุงูุฉ | CVV | ุชุงุฑูุฎ ุงูุงูุชูุงุก | ุงููุชูุฌุฉ |
|-------------|-----|----------------|---------|
| `4000000000000002` | `123` | ุฃู ุชุงุฑูุฎ ูุณุชูุจูู | โ ูุดู |

### ุจุทุงูุงุช 3D Secure

| ุฑูู ุงูุจุทุงูุฉ | CVV | ุชุงุฑูุฎ ุงูุงูุชูุงุก | ูููุฉ ุงููุฑูุฑ |
|-------------|-----|----------------|-------------|
| `4012001037141112` | `123` | ุฃู ุชุงุฑูุฎ ูุณุชูุจูู | `password` |

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุชูุงูู

### 1. ุงุฎุชุจุงุฑ ุนูููุฉ ุงูุดุฑุงุก ุงููุงููุฉ

```bash
# ุชุดุบูู ุงูุณูุฑูุฑ
npm run dev
```

1. ุงูุชุญ ุงููุชุตูุญ ุนูู `http://localhost:3000`
2. ุฃุถู ููุชุฌุงุช ุฅูู ุงูุณูุฉ
3. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฏูุน `/checkout`
4. ุฃุฏุฎู ุจูุงูุงุช ุงูุดุญู
5. ุงุฎุชุฑ **Credit/Debit Card** ูุทุฑููุฉ ุฏูุน
6. ุงุณุชุฎุฏู ุฅุญุฏู ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ ุฃุนูุงู
7. ุฃููู ุนูููุฉ ุงูุฏูุน

### 2. ุงุฎุชุจุงุฑ Webhook

ูุชู ุงุณุชูุจุงู ุฅุดุนุงุฑุงุช Paymob ุนุจุฑ:

```
POST /api/webhooks/paymob
```

ูุงุฎุชุจุงุฑ Webhook ูุญููุงูุ ุงุณุชุฎุฏู [ngrok](https://ngrok.com/):

```bash
# ุชุซุจูุช ngrok
npm install -g ngrok

# ุชุดุบูู ngrok
ngrok http 3000

# ุงุณุชุฎุฏู ุงูุฑุงุจุท ูู Paymob Portal โ Developers โ Webhooks
# ูุซุงู: https://abc123.ngrok.io/api/webhooks/paymob
```

### 3. ุงูุชุญูู ูู ุงูุทูุจุงุช

ุจุนุฏ ุฅุชูุงู ุงูุฏูุนุ ุชุญูู ูู:

- โ ุชู ุฅูุดุงุก ุงูุทูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญุงูุฉ ุงูุฏูุน ุชู ุชุญุฏูุซูุง
- โ ุชู ุชูุฑูุบ ุงูุณูุฉ
- โ ุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ููุนููู

---

## ๐ ุงูุงูุชูุงู ููุฅูุชุงุฌ

ุนูุฏ ุงูุงุณุชุนุฏุงุฏ ููุฅุทูุงู:

### 1. ุชูุนูู ุงูุญุณุงุจ

1. ุฃููู ุนูููุฉ KYC ูู Paymob Portal
2. ูุฏู ุงููุณุชูุฏุงุช ุงููุทููุจุฉ
3. ุงูุชุธุฑ ุงูููุงููุฉ

### 2. ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูุฅูุชุงุฌ

1. ุงุฐูุจ ุฅูู **Settings** โ **Account Info**
2. ุงูุณุฎ **Live API Key** (ููุณ Test API Key)
3. ุงุญุตู ุนูู Live Integration IDs ู iFrame IDs

### 3. ุชุญุฏูุซ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

ูู ููู `.env.production` ุฃู `.env.local` ููุฅูุชุงุฌ:

```bash
# Paymob Production API
PAYMOB_API_KEY=<your_live_api_key>
PAYMOB_INTEGRATION_ID=<your_live_integration_id>
PAYMOB_IFRAME_ID=<your_live_iframe_id>
PAYMOB_HMAC_SECRET=<your_live_hmac_secret>
```

### 4. ุชุญุฏูุซ Webhook URL

ูู Paymob Portal:

1. ุงุฐูุจ ุฅูู **Developers** โ **Webhooks**
2. ุฃุถู ุฑุงุจุท ุงูุฅูุชุงุฌ:
   ```
   https://yourdomain.com/api/webhooks/paymob
   ```

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- [Paymob Documentation](https://docs.paymob.com/)
- [Paymob API Reference](https://docs.paymob.com/docs/api-reference)
- [Paymob Support](https://accept.paymob.com/portal2/en/support)

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: "Failed to authenticate with Paymob"

**ุงูุญู:**
- ุชุญูู ูู ุตุญุฉ `PAYMOB_API_KEY`
- ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู Test API Key ูู ุจูุฆุฉ ุงูุชุทููุฑ

### ูุดููุฉ: "Invalid integration ID"

**ุงูุญู:**
- ุชุญูู ูู `PAYMOB_INTEGRATION_ID`
- ุชุฃูุฏ ูู ุฃู Integration ููุนู ูู Portal

### ูุดููุฉ: "Payment failed"

**ุงูุญู:**
- ุงุณุชุฎุฏู ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุตุญูุญุฉ
- ุชุญูู ูู Logs ูู Paymob Portal
- ุชุฃูุฏ ูู ุฃู ุงููุจูุบ ุจุงููุฑูุด (cents) ูููุณ ุจุงูุฌูููุงุช

### ูุดููุฉ: "Webhook not received"

**ุงูุญู:**
- ุชุญูู ูู Webhook URL ูู Portal
- ุงุณุชุฎุฏู ngrok ููุงุฎุชุจุงุฑ ุงููุญูู
- ุชุญูู ูู HMAC Secret

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุฑุงุฌุน [Paymob Documentation](https://docs.paymob.com/)
2. ุชูุงุตู ูุน [Paymob Support](https://accept.paymob.com/portal2/en/support)
3. ุชุญูู ูู Logs ูู Console ู Paymob Portal

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ูู:** 2026-01-24
