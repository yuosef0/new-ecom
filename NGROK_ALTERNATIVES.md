# ๐ ุญู ุจุฏูู ุจุฏูู ngrok - ุงุณุชุฎุฏุงู Callback ูู Production ููุท

ูุธุฑุงู ูุฃู ngrok ูุง ูุนูู ุจุดูู ุตุญูุญุ ุฅููู ุญู ุจุฏูู:

---

## โ ุงูุญู ุงูููุตู ุจู: ุงุฎุชุจุงุฑ ุจุฏูู Callback ูุญููุงู

### ุงูุฎุทูุฉ 1: ุงุฎุชุจุงุฑ COD (Cash on Delivery)

ูุฐุง ูุนูู ุจุฏูู Paymob ููุง ูุญุชุงุฌ callback:

1. ุงูุชุญ `http://localhost:3000`
2. ุฃุถู ููุชุฌ ููุณูุฉ
3. ุงุฐูุจ ููู Checkout
4. ุงููุฃ ุจูุงูุงุช ุงูุดุญู
5. ุงุฎุชุฑ **"Cash on Delivery"**
6. ุงุถุบุท "PLACE ORDER"

**ุงููุชูุฌุฉ:**
- โ ูุนูู ุจุฏูู ูุดุงูู
- โ ูุชู ุงูุชุญููู ูุตูุญุฉ ุงูุชุฃููุฏ
- โ ุงูุทูุจ ูููุดุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

### ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ูุฏููุงู (ููุงุฎุชุจุงุฑ)

ุฅุฐุง ุฃุฑุฏุช ุงุฎุชุจุงุฑ Card payment ุจุฏูู ngrok:

#### ุฃ) ุฃููู ุงูุฏูุน ูู Paymob

1. ุงุฎุชุฑ "Credit/Debit Card"
2. ุงุถุบุท "PLACE ORDER"
3. ุงุณุชุฎุฏู ุจุทุงูุฉ ุงูุงุฎุชุจุงุฑ: `4987654321098769`
4. ุฃููู ุงูุฏูุน ูู Paymob

#### ุจ) ุญุฏูุซ ุงูุทูุจ ูุฏููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุงูุชุญ Supabase Dashboard ููู ุจุชุดุบูู:

```sql
-- ุงุจุญุซ ุนู ุขุฎุฑ ุทูุจ
SELECT id, order_number, status, payment_status, paymob_order_id
FROM orders
ORDER BY created_at DESC
LIMIT 1;

-- ุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
UPDATE orders
SET 
  status = 'confirmed',
  payment_status = 'paid',
  paymob_transaction_id = '123456'  -- ุฃู ุฑูู ููุงุฎุชุจุงุฑ
WHERE order_number = 'ORD-XXXXXX';  -- ุถุน ุฑูู ุงูุทูุจ ููุง

-- ุฃุถู tracking entry
INSERT INTO order_tracking (order_id, status, description)
VALUES (
  'order-id-here',  -- ุถุน order ID ููุง
  'confirmed',
  'Payment confirmed manually for testing'
);
```

---

## ๐ ููุฅูุชุงุฌ: ูุง ุชุญุชุงุฌ ngrok!

ุนูุฏูุง ุชูุดุฑ ุงููููุน ุนูู ุณูุฑูุฑ ุญูููู (ูุซู Vercel, Netlify, etc):

### ุงูุฎุทูุฉ 1: ุงูุดุฑ ุงููููุน

```bash
# ูุซุงู: Vercel
vercel deploy
```

ุณุชุญุตู ุนูู ุฑุงุจุท ูุซู:
```
https://your-site.vercel.app
```

### ุงูุฎุทูุฉ 2: ุญุฏูุซ Paymob Portal

ุงูุขู ููููู ุชุญุฏูุซ Paymob Portal ุจุณูููุฉ!

---

## ๐ ููููุฉ ุชุญุฏูุซ Paymob Portal

### ุงูุทุฑููุฉ 1: ูู ุฎูุงู ุงููููุน (ููุตู ุจูุง)

#### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู

ุงุฐูุจ ุฅูู: **https://accept.paymob.com/portal2/en/login**

ุงุณุชุฎุฏู:
- Email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุฐู ุณุฌูุช ุจู
- Password: ูููุฉ ุงููุฑูุฑ

#### ุงูุฎุทูุฉ 2: ุงุฐูุจ ุฅูู Developer Settings

ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ:
1. ุงุถุบุท ุนูู **"Developers"** (ุฃููููุฉ `</>`)
2. ุงุฎุชุฑ **"Payment Integrations"**

#### ุงูุฎุทูุฉ 3: ุงุฎุชุฑ Integration

ุณุชุฌุฏ ูุงุฆูุฉ ุจุงูู integrations:
- ุงุจุญุซ ุนู Integration ID: **4549597**
- ุฃู ุงุจุญุซ ุนู "Online Card" integration

#### ุงูุฎุทูุฉ 4: ุฃุถู Callback URL

ูู ุตูุญุฉ Integration:
1. ุงุจุญุซ ุนู ุญูู **"Callback URL"** ุฃู **"Redirect URL"**
2. ุฃุถู:
   ```
   https://your-site.vercel.app/api/paymob/callback
   ```
3. ุงุถุบุท **"Save"** ุฃู **"Update"**

---

### ุงูุทุฑููุฉ 2: ูู ุฎูุงู iFrame Settings

#### ุงูุฎุทูุฉ 1: ุงุฐูุจ ุฅูู iFrames

ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ:
1. ุงุถุบุท ุนูู **"Developers"**
2. ุงุฎุชุฑ **"iFrames"**

#### ุงูุฎุทูุฉ 2: ุงุฎุชุฑ iFrame

ุณุชุฌุฏ ูุงุฆูุฉ ุจุงูู iFrames:
- ุงุจุญุซ ุนู iFrame ID: **858127**
- ุงุถุบุท ุนููู ููุชุนุฏูู

#### ุงูุฎุทูุฉ 3: ุฃุถู Callback URL

ูู ุตูุญุฉ iFrame Settings:
1. ุงุจุญุซ ุนู **"Callback URL"** ุฃู **"Success URL"**
2. ุฃุถู:
   ```
   https://your-site.vercel.app/api/paymob/callback
   ```
3. ุงุญูุธ ุงูุชุบููุฑุงุช

---

## ๐ฏ ุจุฏุงุฆู ngrok ููุชุทููุฑ ุงููุญูู

ุฅุฐุง ุฃุฑุฏุช ุงุฎุชุจุงุฑ Callback ูุญููุงูุ ุฌุฑุจ ูุฐู ุงูุจุฏุงุฆู:

### 1. LocalTunnel (ุฃุณูู)

```bash
# ุชุซุจูุช
npm install -g localtunnel

# ุชุดุบูู
lt --port 3000
```

ุณุชุญุตู ุนูู ุฑุงุจุท ูุซู:
```
https://random-name.loca.lt
```

### 2. Cloudflare Tunnel (ูุฌุงูู)

```bash
# ุชุญููู
# ูู https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation/

# ุชุดุบูู
cloudflared tunnel --url http://localhost:3000
```

### 3. VS Code Port Forwarding (ุฅุฐุง ููุช ุชุณุชุฎุฏู VS Code)

1. ุงูุชุญ VS Code
2. ุงุถุบุท `Ctrl+Shift+P`
3. ุงูุชุจ "Forward a Port"
4. ุฃุฏุฎู `3000`
5. ุงุฎุชุฑ "Public"
6. ุงูุณุฎ ุงูุฑุงุจุท

---

## ๐ธ ุตูุฑ ุชูุถูุญูุฉ ูู Paymob Portal

ุฏุนูู ุฃูุดุฆ ูู ุฏููู ูุตูุฑ:

### ุดูู ุตูุญุฉ Developers

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Paymob Accept Portal               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ Dashboard                        โ
โ  ๐ณ Transactions                     โ
โ  ๐ฆ Orders                           โ
โ  ๐ฅ Customers                        โ
โ  โ๏ธ  Settings                        โ
โ  </> Developers  โ ุงุถุบุท ููุง         โ
โ      โโ API Keys                    โ
โ      โโ Payment Integrations โ ููุง  โ
โ      โโ iFrames          โ ุฃู ููุง   โ
โ      โโ Webhooks                    โ
โ      โโ HMAC                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุดูู ุตูุญุฉ Payment Integration

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Online Card Integration             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Integration ID: 4549597             โ
โ                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ Callback URL                   โ โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ โ
โ  โ โ https://your-site.com/   โ   โ โ
โ  โ โ api/paymob/callback      โ   โ โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                      โ
โ  [Save Changes]                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูุฎูุงุตุฉ

### ููุชุทููุฑ ุงููุญูู (ุงูุขู):

**ุงุณุชุฎุฏู COD ููุงุฎุชุจุงุฑ:**
- ูุง ูุญุชุงุฌ Paymob
- ูุง ูุญุชุงุฌ ngrok
- ูุนูู ูุจุงุดุฑุฉ
- ูุซุงูู ููุงุฎุชุจุงุฑ ุงูุณุฑูุน

### ููุฅูุชุงุฌ (ูุงุญูุงู):

**ุจุนุฏ ูุดุฑ ุงููููุน:**
1. ุงูุดุฑ ุนูู Vercel/Netlify
2. ุงุญุตู ุนูู ุงูุฑุงุจุท
3. ุญุฏูุซ Paymob Portal
4. ุงุฎุชุจุฑ Card payment ุจุดูู ูุงูู

---

## ๐ ุฅุฐุง ูู ุชุณุชุทุน ุงููุตูู ูู Paymob Portal

### ุงูุญู 1: ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ

1. ุงุฐูุจ ุฅูู: https://accept.paymob.com/portal2/en/register
2. ุณุฌู ุญุณุงุจ ุฌุฏูุฏ
3. ุงุญุตู ุนูู Test API Keys ุงูุฎุงุตุฉ ุจู
4. ุญุฏูุซ `.env.local` ุจุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ

### ุงูุญู 2: ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุญุงููุฉ ููุง ูู

ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู `.env.local` ูู ุจูุงูุงุช ุงุฎุชุจุงุฑ ุนุงูุฉ:
- ููููู ุงุณุชุฎุฏุงููุง ููุงุฎุชุจุงุฑ
- ููู ูู ุชุณุชุทูุน ุชุญุฏูุซ Callback URL
- ุณุชุญุชุงุฌ ูุญุณุงุจ ุฎุงุต ููุฅูุชุงุฌ

---

**ูู ุชุฑูุฏ ุงููุณุงุนุฏุฉ ูู:**
1. โ ุฅูุดุงุก ุญุณุงุจ Paymob ุฌุฏูุฏุ
2. โ ุงุณุชุฎุฏุงู LocalTunnel ุจุฏูุงู ูู ngrokุ
3. โ ุงูุงุณุชูุฑุงุฑ ูู ุงูุงุฎุชุจุงุฑ ุจู COD ููุทุ

ุฃุฎุจุฑูู ูุณุฃุณุงุนุฏู! ๐
